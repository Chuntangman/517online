# 智能路线匹配功能使用说明

## 功能概述

智能路线匹配功能基于用户的个人偏好和当前天气条件，为用户推荐最适合的骑行路线。

## 使用方法

### 1. 切换到智能匹配模式
在路线规划组件中，点击"智能匹配"按钮切换到智能匹配模式。

### 2. 设置匹配参数

#### 难易度滑动条 (1-10)
- **简单** (1-3): 适合初学者，路况较好
- **中等** (4-7): 适合有一定经验的骑行者
- **困难** (8-10): 适合经验丰富的骑行者，路况复杂

#### 风景优先级滑动条 (1-10)
- **不重要** (1-3): 更注重其他因素
- **重要** (4-7): 风景是重要考虑因素
- **非常重要** (8-10): 风景是首要考虑因素

#### 骑行类型选择
- **休闲**: 40-60公里/天，轻松骑行
- **自由**: 80-120公里/天，中等强度
- **挑战**: 150公里以上/天，高强度骑行

#### 骑行天数 (1-15天)
设置计划的骑行天数，系统会根据骑行类型计算预期总里程。

### 3. 智能匹配
点击"智能匹配路线"按钮，系统会：
1. 获取当前天气信息
2. 根据设置的参数计算每条路线的匹配度
3. 按匹配度从高到低排序显示推荐路线

### 4. 查看结果
匹配结果会显示：
- 路线名称和基本信息（地区、里程、预计天数）
- 匹配度评分（0-10分，分数越高越匹配）
- 点击任一路线可选择该路线

## 匹配算法说明

### 评分构成
- **自然条件得分** (25%): 风景评分 + 天气评分
- **难易度得分** (25%): 基于路况与用户偏好的匹配度
- **骑行得分** (50%): 基于里程与用户计划的匹配度

### 天气评分自动分类
- **好天气** (9分): 晴天、阴天、多云
- **一般天气** (6分): 小雨、小雪、轻雾等
- **差天气** (3分): 雷雨、暴雨、暴雪等极端天气

## 开发环境说明

在开发环境下，如果后端API不可用，系统会自动使用模拟数据进行演示。

## API接口

### 智能匹配接口
```
POST /api/v1/routes/smart-match
```

**请求参数:**
```json
{
  "difficulty": 5,           // 难易度 1-10
  "sceneryPriority": 7,      // 风景优先级 1-10  
  "cyclingType": "自由",      // 骑行类型
  "days": 3,                 // 骑行天数 1-15
  "weatherScore": 6,         // 天气评分 3-9
  "limit": 10                // 返回结果数量
}
```

**响应格式:**
```json
{
  "success": true,
  "message": "智能匹配成功",
  "data": {
    "routes": [...],         // 匹配的路线列表
    "matchParams": {...}     // 匹配参数
  },
  "count": 10
}
```
